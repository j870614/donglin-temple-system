import{A as se,f as V,g as B,h as T,B as D,o as c,c as p,a as e,F as $,v as A,x as y,i as l,t as _,j as x,y as L,l as O,u as s,C as E,z as R,p as q,e as G,_ as W,b as w,w as N,r as H,d as J}from"./index-aa72e6c4.js";import{s as Q,_ as te}from"./OpenSideBar.vue_vue_type_script_setup_true_lang-3231bebf.js";import{u as z}from"./UserStore-e501c0cf.js";import{_ as ne}from"./LOGO-acc6e274.js";import"./SweetAlert-183ed47c.js";const X=se("navInfoStore",{state:()=>({isUserOpen:!1,isMsgOpen:!1}),actions:{closeAll(){this.isUserOpen=!1,this.isMsgOpen=!1}}}),oe=h=>(q("data-v-9bb7a4f7"),h=h(),G(),h),ae={class:"h-100 d-flex flex-column justify-content-between py-2 my-1 my-xl-3 pt-xl-0"},le={class:"list-inline"},ie=["onMouseenter","onFocus","onClick","onKeydown"],re={class:"fw-semibold d-flex align-items-center gap-3"},de={class:"material-symbols-outlined fs-3"},ce=["onMouseenter","onFocus","onClick","onKeydown"],pe={class:"fw-semibold d-flex align-items-center gap-3"},ue={class:"material-symbols-outlined fs-3"},fe=["onMouseenter","onFocus","onClick","onKeydown"],me={class:"fw-semibold"},be=["onMouseenter","onFocus","onClick","onKeydown"],ve={class:"fw-semibold d-flex align-items-center gap-3"},ge={class:"material-symbols-outlined fs-3"},he=oe(()=>e("span",{class:"material-symbols-outlined"}," logout ",-1)),_e=V({__name:"SideBar",setup(h){const b=E(),g=R(),t=z(),u={系統管理:{icon:"build",path:"",name:"系統管理",isOpen:!1,children:[{icon:"vpn_key",path:"",name:"使用者權限",isOpen:!1,children:[{path:"/permissions/manage",name:"使用者權限管理"},{path:"/permissions/authorized",name:"使用者權限核發"}]},{icon:"settings",path:"",name:"系統設定",isOpen:!1,children:[{path:"/permissions/buddha",name:"佛七期數設定"},{path:"",name:"行事曆新增、修改"}]},{icon:"notifications",path:"",name:"系統公告",isOpen:!1,children:[{path:"",name:"公告新增"},{path:"",name:"歷史公告查詢"}]}]},知客:{icon:"group",path:"",name:"知客",isOpen:!1,children:[{icon:"edit_calendar",path:"",name:"佛七報名預約",isOpen:!1,children:[{path:"/buddha/list",name:"佛七報名預約名單"},{path:"/buddha/signUp?step=1",name:"佛七報名"},{path:"/buddha/checkIn?step=1",name:"佛七報到"}]},{icon:"badge",path:"",name:"皈依報名",isOpen:!1,children:[{path:"",name:"皈依報名名單"},{path:"",name:"皈依報名"},{path:"",name:"皈依資料建檔"}]},{icon:"calendar_month",path:"",name:"參訪及活動",isOpen:!1,children:[{path:"",name:"來寺參訪預約"},{path:"",name:"參與活動人數登記"}]}]},寮房:{icon:"house_siding",path:"",name:"寮房",isOpen:!1,children:[{icon:"hotel",path:"",name:"預約及安單",isOpen:!1,children:[{path:"/booking?step=1",name:"安排寮房"},{path:"",name:"報到安單"},{path:"",name:"離單"}]},{icon:"help_clinic",path:"",name:"寮房資訊",isOpen:!1,children:[{path:"",name:"查詢寮房資訊"},{path:"",name:"更換寮房"},{path:"",name:"設備報修"}]},{icon:"calendar_month",path:"",name:"日常坡事",isOpen:!1,children:[{path:"",name:"坡事列表"},{path:"",name:"坡事安排"}]}]},四眾個人資料:{icon:"draft",path:"",name:"四眾個人資料",isOpen:!1,children:[{icon:"search",path:"",name:"查詢四眾個人資料",isOpen:!1,children:[]}]},查詢用齋人數:{icon:"restaurant_menu",path:"",name:"查詢用齋人數",isOpen:!1}},n=B([{icon:"house",path:"",name:"回首頁",isOpen:!1}]),f=B("管理員");function k(){const v=t.deaconName||sessionStorage.deaconName;switch(v.includes("知客")?f.value="知客":v.includes("寮房")?f.value="寮房":f.value="管理員",f.value){case"管理員":n.value.push(u.系統管理,u.知客,u.寮房,u.四眾個人資料,u.查詢用齋人數);break;case"知客":n.value.push(u.知客,u.四眾個人資料,u.查詢用齋人數);break;case"寮房":n.value.push(u.寮房,u.四眾個人資料,u.查詢用齋人數);break}}T(()=>{sessionStorage.deaconName?k():t.checkLogin(t.getToken())}),D(()=>t.deaconName,()=>{k()});const M=B(n),r=B(""),I=B("");function F(v,i){I.value=v+i}function U(v){const i=g.fullPath.split("/back")[1].replace(/\?\D*\W*\S*/,"");return v.includes("?")&&i?v.startsWith(i):g.fullPath.split("/back")[1]===v}const P=B(0),Z=Q();function S(v,i){P.value=window.innerWidth,F(v,i),b.push(`/back${i}`),P.value<1200&&(Z.isOpen=!1)}function K(v,i){const a=n.value.findIndex(o=>o.name===v.name);if(i){const o=n.value[a];if(o.children){const d=o.children.findIndex(j=>j.name===i.name);o.children[d].isOpen=!o.children[d].isOpen,F(o.children[d].name,o.children[d].path)}return}if(n.value[a].isOpen){const o=n.value[a];o!=null&&o.children&&o.children.forEach((d,j,C)=>{const ee=C;ee[j].isOpen=!1})}n.value[a].isOpen=!n.value[a].isOpen,F(n.value[a].name,n.value[a].path)}return(v,i)=>(c(),p("div",ae,[e("ul",le,[(c(!0),p($,null,A(M.value,a=>(c(),p($,{key:a.name+a.icon},[e("li",{class:y(["fs-5 style-sidebar flex-center",{"bg-neutral-10":r.value===a.name+a.icon&&I.value!==a.name+a.path,"bg-primary text-white":!a.children&&I.value===a.name+a.path}]),onMouseenter:l(()=>r.value=a.name+a.icon,["self"]),onFocus:l(()=>r.value=a.name+a.icon,["prevent"]),onMouseleave:i[0]||(i[0]=l(()=>r.value="",["self"])),onBlur:i[1]||(i[1]=l(()=>r.value="",["prevent"])),onClick:l(()=>{a.children?K(a,null):S(a.name,a.path)},["prevent"]),onKeydown:l(()=>{a.children?K(a,null):S(a.name,a.path)},["prevent"])},[e("div",re,[e("span",de,_(a.icon),1),x(" "+_(a.name),1)]),a.children?(c(),p("span",{key:0,class:"material-symbols-outlined",style:L({transform:a.isOpen?"rotate(180deg)":"rotate(0deg)"})}," expand_more ",4)):O("",!0)],42,ie),a.children&&a.isOpen?(c(!0),p($,{key:0},A(a.children,o=>(c(),p($,{key:o.name+o.icon},[o.children&&o.children.length?(c(),p($,{key:0},[e("li",{class:y(["fs-5 flex-center style-sidebar",{"bg-neutral-10":r.value===o.name+o.icon}]),onMouseenter:l(()=>r.value=o.name+o.icon,["self"]),onFocus:l(()=>r.value=o.name+o.icon,["prevent"]),onMouseleave:i[2]||(i[2]=l(()=>r.value="",["self"])),onBlur:i[3]||(i[3]=l(()=>r.value="",["prevent"])),onClick:l(()=>{K(a,o)},["prevent"]),onKeydown:l(()=>{K(a,o)},["prevent"])},[e("div",pe,[e("span",ue,_(o.icon),1),x(" "+_(o.name),1)]),e("span",{class:"material-symbols-outlined",style:L({transform:o.isOpen?"rotate(180deg)":"rotate(0deg)"})}," expand_more ",4)],42,ce),o.isOpen?(c(!0),p($,{key:0},A(o.children,d=>(c(),p("ul",{class:"list-inline border-start border-neutral-40 border-4",style:{"margin-left":"2rem"},key:d.name},[e("li",{class:y(["fs-5 style-sidebar",{"bg-primary text-white":U(d.path),"bg-neutral-10":r.value===d.name&&!U(d.path)}]),onMouseenter:l(()=>r.value=d.name,["self"]),onFocus:l(()=>r.value=d.name,["prevent"]),onMouseleave:i[4]||(i[4]=l(()=>r.value="",["self"])),onBlur:i[5]||(i[5]=l(()=>r.value="",["prevent"])),onClick:l(()=>S(d.name,d.path),["prevent"]),onKeydown:l(()=>S(d.name,d.path),["prevent"])},[e("div",me,_(d.name),1)],42,fe)]))),128)):O("",!0)],64)):(c(),p("li",{key:1,class:y(["fs-5 style-sidebar",{"bg-primary text-white":U(o.path),"bg-neutral-10":r.value===o.name&&!U(o.path)}]),onMouseenter:l(()=>r.value=o.name,["self"]),onFocus:l(()=>r.value=o.name,["prevent"]),onMouseleave:i[6]||(i[6]=l(()=>r.value="",["self"])),onBlur:i[7]||(i[7]=l(()=>r.value="",["prevent"])),onClick:l(()=>S(o.name,o.path),["prevent"]),onKeydown:l(()=>S(o.name,o.path),["prevent"])},[e("div",ve,[e("span",ge,_(o.icon),1),x(" "+_(o.name),1)])],42,be))],64))),128)):O("",!0)],64))),128))]),e("button",{type:"button",class:y(["btn fs-5 fw-semibold style-sidebar d-flex align-items-center gap-3",{"bg-neutral-10":r.value==="登出"}]),onMouseenter:i[8]||(i[8]=l(()=>r.value="登出",["self"])),onFocus:i[9]||(i[9]=()=>r.value="登出"),onMouseleave:i[10]||(i[10]=l(()=>r.value="",["self"])),onBlur:i[11]||(i[11]=()=>r.value=""),onClick:i[12]||(i[12]=a=>s(t).signOut(s(b)))},[he,x("登出 ")],34)]))}});const ye=W(_e,[["__scopeId","data-v-9bb7a4f7"]]),Y="/donglin-temple-system/assets/bell-outline-3695ba45.svg",xe="/donglin-temple-system/assets/Logo-mobile-sm-890d4410.png",m=h=>(q("data-v-ff12c4b3"),h=h(),G(),h),we={class:"d-none d-xl-flex"},Oe=m(()=>e("img",{class:"logo",src:ne,alt:"spar-cat-eye"},null,-1)),ke=m(()=>e("div",{class:"h1 fw-semibold ps-4"},"寺務管理系統",-1)),$e={class:"d-flex align-items-center d-flex justify-content-end"},Me={class:"position-relative"},Se=m(()=>e("img",{class:"svg bell-outline icon-position",src:Y,alt:"bell-outline"},null,-1)),Be=m(()=>e("span",{style:{padding:"3px","background-color":"#ff5d53",top:"34%",right:"27%"},class:"rounded-circle position-absolute"},null,-1)),Ne=[Se,Be],Ue={key:0,class:"position-absolute end-0 bg-white border rounded-4 p-3",style:{width:"35vw","max-width":"350px"}},Ke=J('<div class="d-flex gap-2 align-items-center justify-content-between mb-2 mb-xl-3" data-v-ff12c4b3><p class="mb-0 fs-4 fw-semibold" data-v-ff12c4b3>新通知</p><div class="d-flex gap-1" data-v-ff12c4b3><button type="button" class="btn btn-primary text-white" data-v-ff12c4b3>顯示更多</button><button type="button" class="btn btn-outline-danger" data-v-ff12c4b3>清除通知</button></div></div><ul class="list-inline d-flex flex-column gap-2 gap-xl-3 mb-0" data-v-ff12c4b3><li class="d-flex gap-3 p-2 box-style box-hover border border-neutral-40" data-v-ff12c4b3><img src="https://picsum.photos/500/500" alt="" class="rounded-circle" style="max-width:3vw;max-height:3vw;" data-v-ff12c4b3><div class="flex-grow-1" data-v-ff12c4b3><b class="fs-6" data-v-ff12c4b3>知客 普乙</b><div class="d-flex gap-2 align-items-center justify-content-between" data-v-ff12c4b3><p class="mb-0 d-flex flex-column" style="white-space:pre-wrap;" data-v-ff12c4b3><span data-v-ff12c4b3> 法眷<b data-v-ff12c4b3>普乙</b>已預約報名佛七。 </span></p><p class="mb-0 btn btn-neutral-40 fs-6 fw-light rounded-4" data-v-ff12c4b3>15:00</p></div></div></li></ul>',2),Ie=[Ke],Fe=m(()=>e("span",{class:"material-symbols-outlined text-primary svg icon-position"}," account_circle ",-1)),je=[Fe],Ae={class:"login-name fs-5 d-flex py-5 my-3"},Le={class:"pe-3 position-relative d-flex justify-content-around"},Ve={key:0,class:"d-flex flex-column mb-0 position-absolute end-50 list-inline bg-white border rounded-4 overflow-hidden",style:{width:"15vw",top:"150%"}},We=m(()=>e("span",{class:"material-symbols-outlined me-2"}," manage_accounts ",-1)),ze=m(()=>e("span",{class:"material-symbols-outlined me-2"}," logout ",-1)),Pe={class:"d-flex d-xl-none"},Te={class:"d-flex align-items-center"},De={class:"d-flex align-items-center mb-0"},Ee=m(()=>e("img",{class:"logo-mobile",src:xe,alt:"Logo-mobile"},null,-1)),Re=m(()=>e("span",{class:"h5 ms-1 mb-0 logo-mobile-title"},"寺務管理系統",-1)),qe={class:"align-items-center d-flex justify-content-end"},Ge={class:"position-relative"},He=m(()=>e("img",{class:"svg bell-outline icon-position",src:Y,alt:"bell-outline"},null,-1)),Je=m(()=>e("span",{style:{padding:"3px","background-color":"#ff5d53",top:"34%",right:"27%"},class:"rounded-circle position-absolute"},null,-1)),Qe=[He,Je],Xe={key:0,class:"position-absolute bg-white border rounded-4 p-3",style:{width:"100vw",right:"-56px"}},Ye=J('<div class="d-flex gap-2 align-items-center justify-content-between mb-2 mb-xl-3" data-v-ff12c4b3><p class="mb-0 fs-5 fw-semibold" data-v-ff12c4b3>新通知</p><div class="d-flex gap-1" data-v-ff12c4b3><button type="button" class="btn btn-primary text-white fs-7" data-v-ff12c4b3>顯示更多</button><button type="button" class="btn btn-outline-danger fs-7" data-v-ff12c4b3>清除通知</button></div></div><ul class="list-inline d-flex flex-column gap-2 gap-xl-3 mb-0" data-v-ff12c4b3><li class="d-flex gap-3 p-2 box-style box-hover border border-neutral-40" data-v-ff12c4b3><img src="https://picsum.photos/500/500" alt="" class="rounded-circle" style="width:15vw;height:15vw;max-width:50px;max-height:50px;" data-v-ff12c4b3><div class="flex-grow-1" data-v-ff12c4b3><b class="fs-6" data-v-ff12c4b3>知客 普乙</b><div class="d-flex gap-2 align-items-center justify-content-between" data-v-ff12c4b3><p class="mb-0 d-flex flex-column" style="white-space:pre-wrap;" data-v-ff12c4b3><span data-v-ff12c4b3> 法眷<b data-v-ff12c4b3>普乙</b>已預約報名佛七。 </span></p><p class="mb-0 btn btn-neutral-40 fs-6 fw-light rounded-4" data-v-ff12c4b3>15:00</p></div></div></li></ul>',2),Ze=[Ye],Ce={class:"position-relative"},es=m(()=>e("span",{class:"material-symbols-outlined text-primary svg icon-position"}," account_circle ",-1)),ss=[es],ts={key:0,class:"d-flex flex-column mb-0 position-absolute end-0 list-inline bg-white border rounded-4 overflow-hidden",style:{width:"50vw","max-width":"250px"}},ns=m(()=>e("span",{class:"material-symbols-outlined me-2"}," manage_accounts ",-1)),os=m(()=>e("span",{class:"material-symbols-outlined me-2"}," logout ",-1)),as=V({__name:"NavBar",setup(h){const b=z(),g=E(),t=X();return(u,n)=>{var k,M;const f=H("router-link");return c(),p($,null,[e("div",we,[e("h1",{class:"flex-grow-1 d-flex align-items-center gx-5 mb-0",onClick:n[0]||(n[0]=l(r=>s(t).closeAll(),["prevent"])),onKeydown:n[1]||(n[1]=l(r=>s(t).closeAll(),["prevent"]))},[w(f,{to:"/back",class:"pe-4"},{default:N(()=>[Oe]),_:1}),ke],32),e("div",$e,[e("div",Me,[e("div",{class:y(["icon-radius cursor-point",{"bg-neutral-10":s(t).isMsgOpen}]),style:{"margin-right":"1.125rem"},onClick:n[2]||(n[2]=l(()=>{s(t).isMsgOpen=!s(t).isMsgOpen,s(t).isUserOpen=!1},["prevent"])),onKeydown:n[3]||(n[3]=l(()=>{s(t).isMsgOpen=!s(t).isMsgOpen,s(t).isUserOpen=!1},["prevent"]))},Ne,34),s(t).isMsgOpen?(c(),p("div",Ue,Ie)):O("",!0)]),e("div",{class:"d-flex align-items-center",onClick:n[6]||(n[6]=l(()=>{s(t).isUserOpen=!s(t).isUserOpen,s(t).isMsgOpen=!1},["prevent"])),onKeydown:n[7]||(n[7]=l(()=>{s(t).isUserOpen=!s(t).isUserOpen,s(t).isMsgOpen=!1},["prevent"]))},[e("div",{class:y(["icon-radius cursor-point",{"bg-neutral-10":s(t).isUserOpen}])},je,2),e("div",Ae,_(s(b).deaconName)+" "+_(((k=s(b).user)==null?void 0:k.DharmaName)||((M=s(b).user)==null?void 0:M.Name)),1),e("div",Le,[e("span",{class:"material-symbols-outlined svg cursor-point",style:L({transform:s(t).isUserOpen?"rotate(180deg)":"rotate(0)"})}," expand_more ",4),s(t).isUserOpen?(c(),p("ul",Ve,[e("li",null,[w(f,{to:"",class:"btn box-hover p-3 rounded-0 d-flex align-items-center"},{default:N(()=>[We,x("帳號設定")]),_:1})]),e("li",{class:"btn box-hover p-3 rounded-0 d-flex align-items-center",onClick:n[4]||(n[4]=r=>s(b).signOut(s(g))),onKeyup:n[5]||(n[5]=r=>s(b).signOut(s(g)))},[ze,x("登出 ")],32)])):O("",!0)])],32)])]),e("div",Pe,[e("div",{class:"flex-grow-1",onClick:n[8]||(n[8]=l(r=>s(t).closeAll(),["prevent"])),onKeydown:n[9]||(n[9]=l(r=>s(t).closeAll(),["prevent"]))},[e("div",Te,[w(te,{page:"nav"},{"icon-name":N(()=>[x(" menu ")]),_:1}),e("h1",De,[w(f,{to:"/back",class:"ms-4"},{default:N(()=>[Ee]),_:1}),Re])])],32),e("div",qe,[e("div",Ge,[e("div",{class:y(["icon-radius cursor-point",{"bg-neutral-10":s(t).isMsgOpen}]),style:{"margin-right":"1.125rem"},onClick:n[10]||(n[10]=l(()=>{s(t).isMsgOpen=!s(t).isMsgOpen,s(t).isUserOpen=!1},["prevent"])),onKeydown:n[11]||(n[11]=l(()=>{s(t).isMsgOpen=!s(t).isMsgOpen,s(t).isUserOpen=!1},["prevent"]))},Qe,34),s(t).isMsgOpen?(c(),p("div",Xe,Ze)):O("",!0)]),e("div",Ce,[e("div",{class:y(["icon-radius cursor-point",{"bg-neutral-10":s(t).isUserOpen}]),onClick:n[12]||(n[12]=l(()=>{s(t).isUserOpen=!s(t).isUserOpen,s(t).isMsgOpen=!1},["prevent"])),onKeydown:n[13]||(n[13]=l(()=>{s(t).isUserOpen=!s(t).isUserOpen,s(t).isMsgOpen=!1},["prevent"]))},ss,34),s(t).isUserOpen?(c(),p("ul",ts,[e("li",null,[w(f,{to:"",class:"btn box-hover p-3 rounded-0 d-flex align-items-center"},{default:N(()=>[ns,x("帳號設定")]),_:1})]),e("li",{class:"btn box-hover p-3 rounded-0 d-flex align-items-center",onClick:n[14]||(n[14]=r=>s(b).signOut(s(g))),onKeyup:n[15]||(n[15]=r=>s(b).signOut(s(g)))},[os,x("登出 ")],32)])):O("",!0)])])])],64)}}});const ls=W(as,[["__scopeId","data-v-ff12c4b3"]]),is={class:"container-fluid overflow-hidden",style:{"max-height":"100vh"}},rs={class:"bg-white sticky-top border-bottom border-neutral-40"},ds={key:0,class:"col-12 col-xl-3 gx-xl-5 max-sideBar max-heighScroll"},cs={class:"col max-heighScroll",style:{"background-color":"#f6f6f6"}},ps=V({__name:"BackLayout",setup(h){const b=Q(),g=z(),t=X(),u=R();return T(()=>{window.innerWidth<1200&&(b.isOpen=!1),g.checkLogin(g.getToken())}),D(()=>u.path,()=>{g.checkLogin(g.getToken())}),(n,f)=>{const k=H("router-view");return c(),p("div",is,[e("nav",rs,[w(ls)]),e("div",{class:"row flex-grow-1",onClick:f[0]||(f[0]=M=>s(t).closeAll()),onKeydown:f[1]||(f[1]=M=>s(t).closeAll())},[s(b).isOpen?(c(),p("aside",ds,[w(ye)])):O("",!0),e("div",cs,[w(k)])],32)])}}});const gs=W(ps,[["__scopeId","data-v-40f19e7a"]]);export{gs as default};
