import{A as i,P as a}from"./index-aa72e6c4.js";import{u as c}from"./UserStore-e501c0cf.js";const{VITE_BASEURL:o}={VITE_BASEURL:"https://donglin-temple-backend-00pk.onrender.com/api",BASE_URL:"/donglin-temple-system/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},g=i("guestStore",{state:()=>({guestsData:[],currentUser:{}}),actions:{async getTotal(){const s=c();try{a.defaults.headers.common.Authorization=`Bearer ${s.getToken()}`;const t=await a.get(`${o}/users?order=asc`);t.data.status&&(this.guestsData=[...t.data.data.users])}catch(t){console.log(t)}},async addUser(s){const t=c();a.defaults.headers.common.Authorization=`Bearer ${t.getToken()}`;const n=`${o}/users`,d={Name:s.Name,IsMonk:s.IsMonk,IsMale:s.IsMale,DharmaName:s.DharmaName,Mobile:s.Mobile,Phone:s.Phone,Remarks:s.Remarks};try{const e=await a.post(n,d);return{data:e.data.data.user,status:e.data.status,message:e.data.message}}catch(e){return{status:e.response.data.status,message:e.response.data.message}}},async editorInfo(s,t){const n=c();a.defaults.headers.common.Authorization=`Bearer ${n.getToken()}`;const d=`${o}/users/${s}`,e={...t};Object.keys(t).forEach(r=>{(e[r]===null||e[r]===void 0)&&delete e[r]}),e.Address=JSON.stringify(e.Address),typeof e.Address=="string"&&e.Address.replace("/\\/g",""),typeof e.Expertise=="string"&&e.Address.replace("/\\/g",""),typeof e.HealthStatus=="string"&&e.Address.replace("/\\/g",""),delete e.Id,delete e.UpdateAt,delete e.sex,delete e.identity,delete e.date,delete e.CheckInDateBreakfast,delete e.CheckInDateLunch,delete e.CheckInDateDinner,delete e.StayIdentityName;try{await a.patch(d,e)}catch(r){console.log(r)}},async getUser(s){try{const t=await a.get(`${o}/users/${s}`);this.currentUser=t.data.data.user,sessionStorage.setItem("tempUser",JSON.stringify(t.data.data.user))}catch(t){console.log(t)}}}});export{g as G};
