import{f as R,g as m,h as $,c as o,a as t,b as p,w as h,k as b,M as x,u as s,F as _,v as f,t as l,o as n,j as A,x as k,p as M,e as B,C as F,_ as N}from"./index-8954a36c.js";import{_ as O}from"./BackTitle.vue_vue_type_script_setup_true_lang-241e1b7a.js";import{g as D,a as y}from"./Timer-8447a705.js";import{R as U}from"./RoomStore-a97797fe.js";import{_ as Y}from"./StickyTable.vue_vue_type_script_setup_true_lang-f17785c5.js";import{t as w}from"./TagStyle-77d4d103.js";import{P as V}from"./ProcessSteps-165a39d8.js";import"./OpenSideBar.vue_vue_type_script_setup_true_lang-075954b6.js";import"./SweetAlert-183ed47c.js";import"./moment-fbc5633a.js";const v=r=>(M("data-v-ae218f69"),r=r(),B(),r),L={class:"row mx-0"},P={class:"col h-100 gx-xl-5 pt-xl-4 pb-xl-5 py-3 mb-xl-2"},j={class:"d-flex flex-column flex-xl-row gap-xl-4 gap-2 col-12 col-md-5 h-100 gx-xl-5 py-3 py-md-0 mb-5"},T=v(()=>t("label",{class:"form-label fw-semibold fs-5",for:"year"},"年份",-1)),z=["value","selected"],E=v(()=>t("label",{class:"form-label fw-semibold fs-5",for:"month"},"月份",-1)),H=["value","selected"],q={class:"h3 fw-semibold"},G={class:"roomTables"},J=v(()=>t("tr",null,[t("th",null,"報名序號"),t("th",null,"性別"),t("th",null,"法名"),t("th",null,"俗名"),t("th",null,"電話"),t("th",null,"預計報到日"),t("th",null,"預計離單日"),t("th",null,"寮區"),t("th",null,"寮房編號"),t("th",null,"狀態"),t("th",null,"備註"),t("th",null,"報到當天用齋"),t("th",null,"登錄/修改者")],-1)),K=["onClick"],Q={key:0,class:"mb-0"},W={key:1,class:"mb-0"},X={key:2,class:"mb-0"},Z={key:3,class:"mb-0"},ee={class:"d-flex justify-content-end gap-3 mt-5"},te=["disabled"],le=R({__name:"RoomsBooking",setup(r){const I=m(["佛七報名名單","歷史掛單紀錄","安排寮房"]),u=m({Id:0,Status:""}),i=U(),C=F(),c=m(new Date().getFullYear()),d=m(new Date().getMonth()+1);$(async()=>{await i.fetchDataAndInsertRoomArea(c.value,d.value)});function S(g){C.push(`/back/bookingHistory?id=${g}&step=2`)}return(g,a)=>(n(),o("main",L,[t("div",P,[p(O,null,{title:h(()=>[A("佛七預約報名表單")]),_:1}),p(V,{steps:I.value,class:"w-50"},null,8,["steps"]),t("div",j,[t("div",null,[T,b(t("select",{id:"year",class:"form-select form-select-lg fs-5","aria-label":".form-select-lg example","onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),onChange:a[1]||(a[1]=e=>s(i).fetchDataAndInsertRoomArea(c.value,d.value))},[(n(!0),o(_,null,f(new Date().getFullYear()-2009,e=>(n(),o("option",{value:new Date().getFullYear()+1-e,key:e,selected:e+2010===new Date().getFullYear()-2009},l(new Date().getFullYear()+1-e),9,z))),128))],544),[[x,c.value]])]),t("div",null,[E,b(t("select",{id:"month",class:"form-select form-select-lg fs-5","aria-label":".form-select-lg example","onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),onChange:a[3]||(a[3]=e=>s(i).fetchDataAndInsertRoomArea(c.value,d.value))},[(n(),o(_,null,f(12,e=>t("option",{value:e,key:e,selected:e===d.value},l(e),9,H)),64))],544),[[x,d.value]])])]),t("h2",q,l(c.value)+" "+l(["一","二","三","四","五","六","七","八","九","十","十一","十二"][d.value-1])+"月 ",1),t("div",G,[p(Y,null,{thead:h(()=>[J]),tbody:h(()=>[(n(!0),o(_,null,f(s(i).monthAppliess,e=>(n(),o("tr",{key:e.UserId,onClick:ae=>u.value=e,class:k({"table-active":u.value.Id===e.Id})},[t("td",null,l(e.Id),1),t("td",null,l(e.IsMale?"男":"女"),1),t("td",null,l(e.DharmaName),1),t("td",null,l(e.Name),1),t("td",null,l(e.Mobile||e.Phone),1),t("td",null,l(s(D)(new Date(e.CheckInDate).valueOf()))+" / "+l(s(y)(new Date(e.CheckInDate).valueOf())),1),t("td",null,l(s(D)(new Date(e.CheckOutDate).valueOf()))+" / "+l(s(y)(new Date(e.CheckOutDate).valueOf())),1),t("td",null,l(e.roomArea),1),t("td",null,l(e.BuildingName+e.ShareId),1),t("td",null,[t("p",{class:k(["py-2 px-3 mb-0 rounded-4",`bg-${s(w)[e.Status].bgColor} text-${s(w)[e.Status].textColor}`])},l(e.Status),3)]),t("td",null,l(e.Remarks),1),t("td",null,[e.CheckInDateDinner&&e.CheckInDateLunch?(n(),o("p",Q," 用午齋、藥石 ")):e.CheckInDateLunch?(n(),o("p",W,"用午齋")):e.CheckInDateDinner?(n(),o("p",X,"用藥石")):(n(),o("p",Z,"不用齋"))]),t("td",null,l(e.UpdateUserName),1)],10,K))),128))]),_:1}),t("div",ee,[t("button",{type:"button",class:"btn btn-primary py-3 flex-grow-1",style:{"max-width":"184px"},onClick:a[4]||(a[4]=e=>S(u.value.Id)),disabled:!u.value.Id||u.value.Status!=="已報名佛七"}," 安排寮房 ",8,te)])])])]))}});const he=N(le,[["__scopeId","data-v-ae218f69"]]);export{he as default};
