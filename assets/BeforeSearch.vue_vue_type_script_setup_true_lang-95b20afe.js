import{f as C,g as u,h as w,C as I,z as B,o,c as n,a as t,F as h,v as p,t as l,k as D,R as N,x as M,u as m,l as y}from"./index-f343d53b.js";import{G as S}from"./GuestStore-a7c8505d.js";import{b as $,g as U,a as j}from"./Timer-8447a705.js";import{a as K}from"./SweetAlert-183ed47c.js";const T={class:"row d-flex justify-content-center gap-5"},L={class:"col-xl-3 col-10 gx-0 box-style fs-5 overflow-hidden text-center"},R=t("p",{class:"mb-0 py-1 px-3 bg-primary-80 text-white fw-semibold"},"身分別",-1),V=["onClick","onKeydown"],z=["checked","id"],F=["for"],G={class:"col-xl-3 col-10 gx-0 box-style fs-5 overflow-hidden text-center"},P=t("p",{class:"mb-0 py-1 px-3 bg-primary-80 text-white fw-semibold"},"性別",-1),E=["onClick","onKeydown"],J=["checked","id"],O=["for"],Y={class:"d-flex flex-column flex-xl-row justify-content-center gap-xl-5 gap-3 mt-5"},q={class:"form-floating",style:{"min-width":"50%"}},A=t("label",{for:"floatingInput"},"請輸入電話、法名或俗名",-1),H=["data-bs-toggle"],Q={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable"},X={class:"modal-content"},Z=t("div",{class:"modal-header bg-primary"},[t("h5",{class:"modal-title text-white",id:"staticBackdropLabel"},"查詢結果"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),tt={class:"modal-body"},et={key:0,class:"fs-3 text-center"},at={key:1,class:"table table-style table-hover align-middle text-center box-style"},st=t("thead",{class:"bg-neutral-40"},[t("tr",null,[t("th",null,"法眷編號"),t("th",null,"性別"),t("th",null,"法名"),t("th",null,"俗名"),t("th",null,"電話"),t("th",null,"出生年月日"),t("th",null,"身分證末五碼")])],-1),lt=["onClick"],ot={key:0},nt={class:"modal-footer"},it=["data-bs-dismiss"],pt=C({__name:"BeforeSearch",setup(dt){const b=S(),a=u({identity:"法師",sex:"男眾",input:""}),d=u([]);function g(){if(!a.value.input){K.fire({icon:"error",title:"請輸入查詢關鍵字"});return}d.value.length=0;const v=b.guestsData.filter(s=>s.IsMale===(a.value.sex==="男眾")&&s.IsMonk===(a.value.identity==="法師")).filter(s=>a.value.input?s.Name===a.value.input||s.DharmaName===a.value.input||s.Phone===a.value.input||s.Mobile===a.value.input:s);d.value.push(...v)}w(()=>{b.getTotal(),sessionStorage.removeItem("tempUser")});const c=u({Id:0}),_=I(),f=B();function k(){c.value.Id!==0&&(sessionStorage.setItem("tempUser",JSON.stringify(c.value)),_.push(`${f.path}?step=2`))}function x(){sessionStorage.setItem("tempUser","{}"),_.push(`${f.path}?step=2`)}return(v,s)=>(o(),n("div",null,[t("div",T,[t("div",L,[R,(o(),n(h,null,p(["法師","居士"],(e,i)=>t("div",{class:"form-check d-flex justify-content-center gap-2",key:e+i,onClick:r=>a.value.identity=e,onKeydown:r=>a.value.identity=e},[t("input",{checked:a.value.identity===e,class:"form-check-input",type:"radio",name:"身分別",id:e+i},null,8,z),t("label",{class:"form-check-label",for:e+i},l(e),9,F)],40,V)),64))]),t("div",G,[P,(o(),n(h,null,p(["男眾","女眾"],(e,i)=>t("div",{class:"form-check d-flex justify-content-center gap-2",key:e+i,onClick:r=>a.value.sex=e,onKeydown:r=>a.value.sex=e},[t("input",{checked:a.value.sex===e,class:"form-check-input",type:"radio",name:"性別",id:e},null,8,J),t("label",{class:"form-check-label",for:e},l(e),9,O)],40,E)),64))])]),t("div",Y,[t("div",q,[D(t("input",{type:"text",class:"form-control p-2 pt-3",id:"floatingInput",placeholder:"0911111111","onUpdate:modelValue":s[0]||(s[0]=e=>a.value.input=e)},null,512),[[N,a.value.input,void 0,{trim:!0}]]),A]),t("button",{type:"button",class:"btn btn-primary px-4","data-bs-toggle":a.value.input?"modal":"","data-bs-target":"#staticBackdrop",onClick:g}," 查詢 ",8,H)]),t("div",Q,[t("div",W,[t("div",X,[Z,t("div",tt,[d.value.length?(o(),n("table",at,[st,t("tbody",null,[(o(!0),n(h,null,p(d.value,e=>(o(),n("tr",{class:M({"table-active":c.value.Id===e.Id}),key:e.id,onClick:i=>c.value=e},[t("td",null,l(e.Id),1),t("td",null,l(e.IsMale?"男":"女"),1),t("td",null,l(e.DharmaName),1),t("td",null,l(e.Name),1),t("td",null,l(e.Mobile||e.Phone),1),t("td",null,[e.BirthDate?(o(),n("span",ot,l(m($)(e.BirthDate)-1911)+"/"+l(m(U)(e.BirthDate))+"/"+l(m(j)(e.BirthDate)),1)):y("",!0)]),t("td",null,l(e.IdNumber&&e.IdNumber.slice(-5)),1)],10,lt))),128))])])):(o(),n("p",et," 查無建檔資料，是否新增四眾個資？ "))]),t("div",nt,[t("div",null,[t("button",{type:"button",class:"btn btn-outline-primary me-5","data-bs-dismiss":"modal",onClick:x}," 新增個資 "),d.value.length?(o(),n("button",{key:0,type:"button",class:"btn btn-primary",onClick:k,"data-bs-dismiss":c.value.Id!==0?"modal":""}," 選擇 ",8,it)):y("",!0)])])])])])]))}});export{pt as _};
