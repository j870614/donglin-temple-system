import{f as R,g as m,h as A,c as a,a as t,b as h,w as _,k as b,M as k,u as n,F as f,v,t as l,o,j as $,x,p as M,e as N,C as U,_ as B}from"./index-aa72e6c4.js";import{_ as F}from"./BackTitle.vue_vue_type_script_setup_true_lang-32fb9256.js";import{g as y,a as D}from"./Timer-8447a705.js";import{R as O}from"./RoomStore-1f11bea5.js";import{_ as Y}from"./StickyTable.vue_vue_type_script_setup_true_lang-d9453a5c.js";import{t as w}from"./TagStyle-77d4d103.js";import{P as V}from"./ProcessSteps-bb6d27d4.js";import"./OpenSideBar.vue_vue_type_script_setup_true_lang-3231bebf.js";import"./SweetAlert-183ed47c.js";import"./moment-fbc5633a.js";const p=i=>(M("data-v-17ceda2d"),i=i(),N(),i),L={class:"row mx-0"},P={class:"col h-100 gx-xl-5 pt-xl-4 pb-xl-5 py-3 mb-xl-2"},j={class:"d-flex flex-column flex-xl-row gap-xl-4 gap-2 col-12 col-md-5 h-100 gx-xl-5 py-3 py-md-0 mb-5"},T=p(()=>t("label",{class:"form-label fw-semibold fs-5",for:"year"},"年份",-1)),z=["value","selected"],E=p(()=>t("label",{class:"form-label fw-semibold fs-5",for:"month"},"月份",-1)),H=["value","selected"],q={class:"h3 fw-semibold"},G={class:"roomTables"},J=p(()=>t("tr",null,[t("th",null,"報名序號"),t("th",null,"性別"),t("th",null,"法名"),t("th",null,"俗名"),t("th",null,"電話"),t("th",null,"預計報到日"),t("th",null,"預計離單日"),t("th",null,"寮區"),t("th",null,"寮房編號"),t("th",null,"狀態"),t("th",null,"備註"),t("th",null,"報到當天用齋"),t("th",null,"登錄/修改者")],-1)),K={key:0},Q=p(()=>t("td",{colspan:"13"},"當前無可安排人員",-1)),W=[Q],X=["onClick"],Z={key:0,class:"mb-0"},ee={key:1,class:"mb-0"},te={key:2,class:"mb-0"},le={key:3,class:"mb-0"},ae={class:"d-flex justify-content-end gap-3 mt-5"},oe=["disabled"],se=R({__name:"RoomsBooking",setup(i){const I=m(["佛七報名名單","歷史掛單紀錄","安排寮房"]),r=m({Id:0,Status:""}),u=O(),C=U(),c=m(new Date().getFullYear()),d=m(new Date().getMonth()+1);A(async()=>{await u.fetchDataAndInsertRoomArea(c.value,d.value)});function S(g){C.push(`/back/bookingHistory?id=${g}&step=2`)}return(g,s)=>(o(),a("main",L,[t("div",P,[h(F,null,{title:_(()=>[$("佛七預約報名表單")]),_:1}),h(V,{steps:I.value,class:"w-50"},null,8,["steps"]),t("div",j,[t("div",null,[T,b(t("select",{id:"year",class:"form-select form-select-lg fs-5","aria-label":".form-select-lg example","onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),onChange:s[1]||(s[1]=e=>n(u).fetchDataAndInsertRoomArea(c.value,d.value))},[(o(!0),a(f,null,v(new Date().getFullYear()-2009,e=>(o(),a("option",{value:new Date().getFullYear()+1-e,key:e,selected:e+2010===new Date().getFullYear()-2009},l(new Date().getFullYear()+1-e),9,z))),128))],544),[[k,c.value]])]),t("div",null,[E,b(t("select",{id:"month",class:"form-select form-select-lg fs-5","aria-label":".form-select-lg example","onUpdate:modelValue":s[2]||(s[2]=e=>d.value=e),onChange:s[3]||(s[3]=e=>n(u).fetchDataAndInsertRoomArea(c.value,d.value))},[(o(),a(f,null,v(12,e=>t("option",{value:e,key:e,selected:e===d.value},l(e),9,H)),64))],544),[[k,d.value]])])]),t("h2",q,l(c.value)+" "+l(["一","二","三","四","五","六","七","八","九","十","十一","十二"][d.value-1])+"月 ",1),t("div",G,[h(Y,null,{thead:_(()=>[J]),tbody:_(()=>[n(u).monthAppliess.length?(o(!0),a(f,{key:1},v(n(u).monthAppliess,e=>(o(),a("tr",{key:e.UserId,onClick:ne=>r.value=e,class:x({"table-active":r.value.Id===e.Id})},[t("td",null,l(e.Id),1),t("td",null,l(e.IsMale?"男":"女"),1),t("td",null,l(e.DharmaName),1),t("td",null,l(e.Name),1),t("td",null,l(e.Mobile||e.Phone),1),t("td",null,l(n(y)(new Date(e.CheckInDate).valueOf()))+" / "+l(n(D)(new Date(e.CheckInDate).valueOf())),1),t("td",null,l(n(y)(new Date(e.CheckOutDate).valueOf()))+" / "+l(n(D)(new Date(e.CheckOutDate).valueOf())),1),t("td",null,l(e.roomArea),1),t("td",null,l(e.BuildingName+e.ShareId),1),t("td",null,[t("p",{class:x(["py-2 px-3 mb-0 rounded-4",`bg-${n(w)[e.Status].bgColor} text-${n(w)[e.Status].textColor}`])},l(e.Status),3)]),t("td",null,l(e.Remarks),1),t("td",null,[e.CheckInDateDinner&&e.CheckInDateLunch?(o(),a("p",Z," 用午齋、藥石 ")):e.CheckInDateLunch?(o(),a("p",ee,"用午齋")):e.CheckInDateDinner?(o(),a("p",te,"用藥石")):(o(),a("p",le,"不用齋"))]),t("td",null,l(e.UpdateUserDharmaName||e.UpdateUserName),1)],10,X))),128)):(o(),a("tr",K,W))]),_:1}),t("div",ae,[t("button",{type:"button",class:"btn btn-primary py-3 flex-grow-1",style:{"max-width":"184px"},onClick:s[4]||(s[4]=e=>S(r.value.Id)),disabled:!r.value.Id||r.value.Status!=="已報名佛七"}," 安排寮房 ",8,oe)])])])]))}});const ve=B(se,[["__scopeId","data-v-17ceda2d"]]);export{ve as default};
