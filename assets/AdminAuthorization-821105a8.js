import{_ as v}from"./BackTitle.vue_vue_type_script_setup_true_lang-3c0c9404.js";import{_ as k}from"./StickyTable.vue_vue_type_script_setup_true_lang-26e1ec92.js";import{A as w}from"./AdminStore-5e05b7c4.js";import{u as C}from"./UserStore-0e330b01.js";import{t as p}from"./TagStyle-77d4d103.js";import{Q as $}from"./qrcode.vue.esm-6670a9d3.js";import{a as N}from"./SweetAlert-183ed47c.js";import{f as S,g as b,h as A,c as i,a as t,b as u,w as c,u as n,s as B,l as D,r as z,o as r,j as h,F as I,v as V,x as _,t as e}from"./index-3e683233.js";import"./OpenSideBar.vue_vue_type_script_setup_true_lang-7e642112.js";const L={class:"row"},j={class:"col h-100 gx-xl-5 pt-xl-4 pb-xl-5 py-3 mb-xl-2"},q={class:"d-flex justify-content-end py-3"},M=t("tr",null,[t("th",null,"編號"),t("th",null,"性別"),t("th",null,"法名"),t("th",null,"俗名"),t("th",null,"執事堂口"),t("th",null,"執事名稱"),t("th",null,"核發權限者"),t("th",null,"核發日期"),t("th",null,"狀態")],-1),Q={key:0},F=t("td",{colspan:"9"},"當前無待核發人員",-1),G=[F],T=["onClick"],E={class:"d-flex justify-content-end gap-3 mt-5"},P=["disabled"],R={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},U={class:"modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable"},H={class:"modal-content"},J=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"staticBackdropLabel"},"註冊鏈接"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),K={class:"modal-body"},O=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-primary","data-bs-dismiss":"modal"}," 確認 ")],-1),dt=S({__name:"AdminAuthorization",setup(W){const d=b({Id:0}),o=w(),m=C(),f=b(`${window.location.origin}${window.location.pathname}#/register?qr=`);A(()=>{m.checkLogin(m.getToken()),o.getAuthStatus()});async function y(s){try{(await N.fire({html:`<p class="mb-0 fs-3">是否移除<b class="px-2 text-danger fw-semibold">${s.DharmaName?`${s.DharmaName}-`:""}${s.Name?`${s.Name}-`:""}${s.Gender}</b>的權限</p>`,showCancelButton:!0})).isConfirmed&&o.patchAuth(s,!1)}catch(l){console.error(l)}}return(s,l)=>{const x=z("router-link");return r(),i("main",L,[t("div",j,[u(v,null,{title:c(()=>[h(" 使用者權限核發 ")]),_:1}),t("div",q,[u(x,{to:"/back/permissions/authorized/new?step=1",class:"btn btn-lg btn-primary"},{default:c(()=>[h("新增使用者權限帳號")]),_:1})]),u(k,null,{thead:c(()=>[M]),tbody:c(()=>[n(o).adminStatus.length?(r(!0),i(I,{key:1},V(n(o).adminStatus,(a,g)=>(r(),i("tr",{class:_({"table-active":d.value.Id===a.Id}),key:a.Id,onClick:X=>d.value=a},[t("td",null,e(g+1),1),t("td",null,e(a.Gender),1),t("td",null,e(a.DharmaName),1),t("td",null,e(a.Name),1),t("td",null,e(a.ChurchName),1),t("td",null,e(a.DeaconName),1),t("td",null,e(a.AuthorizeDharmaName),1),t("td",null,e(a.AuthorizeDate),1),t("td",null,[t("span",{class:_(["mb-0 rounded-4 py-2 px-3",`bg-${n(p)[a.Status].bgColor} text-${n(p)[a.Status].textColor}`])},e(a.Status),3)])],10,T))),128)):(r(),i("tr",Q,G))]),_:1}),t("div",E,[t("button",{type:"button",class:"btn btn-outline-primary py-3 flex-grow-1",style:{"max-width":"184px"},onClick:l[0]||(l[0]=a=>y(d.value))}," 移除 "),t("button",{type:"button",class:"btn btn-primary py-3 flex-grow-1",style:{"max-width":"184px"},onClick:l[1]||(l[1]=a=>n(o).createdQR(d.value)),disabled:!d.value.Id,"data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 重新產出連結 ",8,P)])]),t("div",R,[t("div",U,[t("div",H,[J,t("div",K,[n(o).qrcode?(r(),B($,{key:0,class:"d-block mx-auto",value:f.value+n(o).qrcode,size:150},null,8,["value"])):D("",!0)]),O])])],512)])}}});export{dt as default};
